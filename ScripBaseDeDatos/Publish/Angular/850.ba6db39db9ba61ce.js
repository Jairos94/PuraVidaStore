"use strict";(self.webpackChunkFrontEndPuraVidaStore=self.webpackChunkFrontEndPuraVidaStore||[]).push([[850],{6850:(G,M,s)=>{s.r(M),s.d(M,{AjustesModule:()=>l});var v=s(6895),p=s(805),j=s(8505),o=s(8256),T=s(4747),Z=s(3441),h=s(5593),x=s(4247),A=s(2210),I=s(5047),C=s(1740),r=s(433),f=s(2453),b=s(1795);function z(i,e){if(1&i&&(o.TgZ(0,"h1"),o._uU(1),o.qZA()),2&i){const t=o.oxw();o.xp6(1),o.Oqu(t.productoSeleccionado.prdCodigo)}}function S(i,e){1&i&&(o.TgZ(0,"h1"),o._uU(1,"Par\xe1metros de ingreso"),o.qZA())}function N(i,e){if(1&i&&(o.TgZ(0,"div")(1,"label",18),o._uU(2),o.qZA()()),2&i){const t=o.oxw();o.xp6(2),o.hij(" ",t.motivoSeleccionado.mtmIdTipoMovimientoNavigation.tpmDescripcion," ")}}function y(i,e){if(1&i&&(o.TgZ(0,"div")(1,"label",19),o._uU(2),o.qZA()()),2&i){const t=o.oxw();o.xp6(2),o.hij(" ",t.motivoSeleccionado.mtmIdTipoMovimientoNavigation.tpmDescripcion," ")}}class c{constructor(e,t,a){this.messageService=e,this.motivoServicio=t,this.productoServicio=a,this.buscador="",this.cantidad=0,this.listaMotivoMovimiento=[],this.tipoMovimimentoSeleccionado={tpmId:0,tpmDescripcion:""},this.motivoSeleccionado={mtmId:0,mtmDescripcion:"",mtmIdTipoMovimiento:0,mtmIdTipoMovimientoNavigation:this.tipoMovimimentoSeleccionado},this.productoSeleccionado={prdId:0,prdNombre:"",prdPrecioVentaMayorista:0,prdPrecioVentaMinorista:0,prdCodigo:"",prdUnidadesMinimas:0,prdIdTipoProducto:0,prdCodigoProvedor:"",pdrVisible:!0,pdrFoto:null,pdrTieneExistencias:!1,prdIdTipoProductoNavigation:null},this.inventarioIngresar={producto:this.productoSeleccionado,cantidadExistencia:this.cantidad}}ngOnInit(){this.cargarTipoAjustes()}leerArchivo(e){return null==e&&(e=""),j.Z.lectorImagen(e)}cargarTipoAjustes(){this.motivoServicio.obtenerMotivosMovimientos().subscribe({next:e=>{this.listaMotivoMovimiento=[],this.listaMotivoMovimiento=e},error:e=>{console.log(e)}})}limpiar(){this.buscador="",this.cantidad=0,this.productoSeleccionado={prdId:0,prdNombre:"",prdPrecioVentaMayorista:0,prdPrecioVentaMinorista:0,prdCodigo:"",prdUnidadesMinimas:0,prdIdTipoProducto:0,prdCodigoProvedor:"",pdrVisible:!0,pdrFoto:null,pdrTieneExistencias:!1,prdIdTipoProductoNavigation:null},this.motivoSeleccionado={mtmId:0,mtmDescripcion:"",mtmIdTipoMovimiento:0,mtmIdTipoMovimientoNavigation:this.tipoMovimimentoSeleccionado}}buscarProductoPorCodigo(){this.productoServicio.ObtenerProductoPorCodigo(this.buscador).subscribe({next:e=>{this.limpiar(),this.productoSeleccionado=e},error:e=>{this.showError(),console.log(e)}})}guardarAjuste(){this.inventarioIngresar.producto=this.productoSeleccionado,this.inventarioIngresar.cantidadExistencia=this.cantidad,this.motivoServicio.GuardarMovimiento(this.inventarioIngresar,this.motivoSeleccionado.mtmId).subscribe({next:e=>{this.showSuccess(),this.limpiar()},error:e=>{console.log(e)}})}showSuccess(){this.messageService.add({severity:"success",summary:"\xc9xito al guardar",detail:"Se guard\xf3 satisfactoriamente el registro"})}showError(){this.messageService.add({severity:"error",summary:"Error",detail:"No se encontr\xf3 resultados con valor suministrado"})}}c.\u0275fac=function(e){return new(e||c)(o.Y36(p.ez),o.Y36(T.C),o.Y36(Z.M))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-realizar-ajuste"]],features:[o._Bn([p.ez])],decls:34,vars:16,consts:[[1,"my-2"],[1,"grid"],[1,"col"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Buscar por c\xf3digo",3,"ngModel","ngModelChange","keyup.enter"],["type","button","pButton","","pRipple","","icon","pi pi-search","styleClass","p-button-warn",3,"click"],[1,"col-1"],["type","button","pButton","","pRipple","","icon","pi pi-save","styleClass","p-button-warn",1,"mx-1",3,"disabled","click"],["type","button","pButton","","pRipple","","icon","pi pi-eraser","styleClass","p-button-warn",3,"click"],[1,"grid","my-2"],[1,"w-full"],["pTemplate","header"],["alt","Card",3,"src"],[1,"field"],["for","minmax-buttons"],["inputId","minmax-buttons",3,"ngModel","showButtons","min","ngModelChange"],["filterBy","mtmDescripcion","placeholder","Seleccione el tipo de ajuste","optionLabel","mtmDescripcion",3,"options","ngModel","filter","showClear","ngModelChange"],[4,"ngIf"],[1,"text-green-500"],[1,"text-red-500"]],template:function(e,t){1&e&&(o._UZ(0,"p-toast"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"input",4),o.NdJ("ngModelChange",function(n){return t.buscador=n})("keyup.enter",function(){return t.buscarProductoPorCodigo()}),o.qZA(),o.TgZ(6,"button",5),o.NdJ("click",function(){return t.buscarProductoPorCodigo()}),o.qZA()()(),o.TgZ(7,"div",6)(8,"div",3)(9,"button",7),o.NdJ("click",function(){return t.guardarAjuste()}),o.qZA(),o.TgZ(10,"button",8),o.NdJ("click",function(){return t.limpiar()}),o.qZA()()()(),o.TgZ(11,"div",9)(12,"div",2)(13,"p-card",10),o.YNc(14,z,2,1,"ng-template",11),o._UZ(15,"img",12),o.TgZ(16,"div",13),o._uU(17),o.qZA(),o.TgZ(18,"div",13),o._uU(19),o.qZA(),o.TgZ(20,"div",13),o._uU(21),o.qZA()()(),o.TgZ(22,"div",2)(23,"p-card",10),o.YNc(24,S,2,0,"ng-template",11),o.TgZ(25,"div",13)(26,"label",14),o._uU(27,"Cantidad a ajustar: "),o.qZA(),o.TgZ(28,"p-inputNumber",15),o.NdJ("ngModelChange",function(n){return t.cantidad=n}),o.qZA()(),o.TgZ(29,"div",13),o._uU(30," Motivo de ajuste "),o.TgZ(31,"p-dropdown",16),o.NdJ("ngModelChange",function(n){return t.motivoSeleccionado=n}),o.qZA(),o.YNc(32,N,3,1,"div",17),o.YNc(33,y,3,1,"div",17),o.qZA()()()()()),2&e&&(o.xp6(5),o.Q6J("ngModel",t.buscador),o.xp6(4),o.Q6J("disabled",!(t.productoSeleccionado.prdId>0&&t.motivoSeleccionado.mtmId>0&&t.cantidad>0)),o.xp6(6),o.Q6J("src",t.leerArchivo(t.productoSeleccionado.pdrFoto),o.LSH),o.uIk("height","200px"),o.xp6(2),o.hij("C\xf3digo: ",t.productoSeleccionado.prdNombre,""),o.xp6(2),o.hij(" C\xf3digo proveedor: ",t.productoSeleccionado.prdCodigoProvedor," "),o.xp6(2),o.hij(" Tipo producto: ",null==t.productoSeleccionado.prdIdTipoProductoNavigation?null:t.productoSeleccionado.prdIdTipoProductoNavigation.tppDescripcion," "),o.xp6(7),o.Q6J("ngModel",t.cantidad)("showButtons",!0)("min",0),o.xp6(3),o.Q6J("options",t.listaMotivoMovimiento)("ngModel",t.motivoSeleccionado)("filter",!0)("showClear",!0),o.xp6(1),o.Q6J("ngIf",t.motivoSeleccionado.mtmIdTipoMovimiento>0&&1===t.motivoSeleccionado.mtmIdTipoMovimientoNavigation.tpmId),o.xp6(1),o.Q6J("ngIf",t.motivoSeleccionado.mtmIdTipoMovimiento>0&&2===t.motivoSeleccionado.mtmIdTipoMovimientoNavigation.tpmId))},dependencies:[v.O5,p.jx,h.Hq,x.Z,A.Lt,I.Rn,C.o,r.Fj,r.JJ,r.On,f.FN,b.H]});var _=s(8184);class u{}u.\u0275fac=function(e){return new(e||u)},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-ajustes"]],decls:1,vars:0,template:function(e,t){1&e&&o._UZ(0,"router-outlet")},dependencies:[_.lC]});var R=s(1493),w=s(8396);function J(i,e){if(1&i){const t=o.EpF();o.TgZ(0,"div",11)(1,"div",12),o._uU(2," Movimientos "),o.TgZ(3,"p-button",13),o.NdJ("click",function(){o.CHM(t);const n=o.oxw();return o.KtG(n.showModalDialog())}),o.qZA()(),o.TgZ(4,"div",14)(5,"div",15)(6,"input",16),o.NdJ("ngModelChange",function(n){o.CHM(t);const g=o.oxw();return o.KtG(g.buscador=n)})("input",function(){o.CHM(t);const n=o.oxw();return o.KtG(n.sujerencias())}),o.qZA()()()()}if(2&i){const t=o.oxw();o.xp6(6),o.Q6J("ngModel",t.buscador)}}function P(i,e){1&i&&(o.TgZ(0,"tr")(1,"th"),o._uU(2,"Id"),o.qZA(),o.TgZ(3,"th"),o._uU(4,"Descripci\xf3n del ajuste"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Tipo Ajuste"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Acciones"),o.qZA()())}function U(i,e){if(1&i){const t=o.EpF();o.TgZ(0,"tr",19)(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td")(8,"button",20),o.NdJ("click",function(){o.CHM(t);const n=o.oxw().$implicit,g=o.oxw();return o.KtG(g.editarAjuste(n))}),o.qZA()()()}if(2&i){const t=o.oxw().$implicit;o.xp6(2),o.Oqu(t.mtmId),o.xp6(2),o.Oqu(t.mtmDescripcion),o.xp6(2),o.Oqu(t.mtmIdTipoMovimientoNavigation.tpmDescripcion)}}function D(i,e){if(1&i){const t=o.EpF();o.TgZ(0,"tr",21)(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td")(8,"button",20),o.NdJ("click",function(){o.CHM(t);const n=o.oxw().$implicit,g=o.oxw();return o.KtG(g.editarAjuste(n))}),o.qZA()()()}if(2&i){const t=o.oxw().$implicit;o.xp6(2),o.Oqu(t.mtmId),o.xp6(2),o.Oqu(t.mtmDescripcion),o.xp6(2),o.Oqu(t.mtmIdTipoMovimientoNavigation.tpmDescripcion)}}function q(i,e){if(1&i&&(o.YNc(0,U,9,3,"tr",17),o.YNc(1,D,9,3,"tr",18)),2&i){const t=e.$implicit;o.Q6J("ngIf",1===t.mtmIdTipoMovimiento),o.xp6(1),o.Q6J("ngIf",2===t.mtmIdTipoMovimiento)}}function F(i,e){if(1&i){const t=o.EpF();o.TgZ(0,"p-button",22),o.NdJ("click",function(){o.CHM(t);const n=o.oxw();return o.KtG(n.Cancelar())}),o.qZA(),o.TgZ(1,"p-button",23),o.NdJ("click",function(){o.CHM(t);const n=o.oxw();return o.KtG(n.GuardarMotivoMovimiento())}),o.qZA()}}const O=function(){return{"min-width":"50rem"}},k=function(){return[10,25,50]},B=function(){return{width:"50vw"}},E=function(){return{"960px":"75vw"}};class m{constructor(e,t){this.servicio=e,this.messageService=t,this.listaMotivosMovimientos=[],this.encabezado="",this.buscador="",this.displayModal=!1,this.listaTipoMovimiento=[],this.TipoMovimientoSeleccionado={tpmId:1,tpmDescripcion:"Positivo"},this.motivo={mtmId:0,mtmDescripcion:"",mtmIdTipoMovimiento:0,mtmIdTipoMovimientoNavigation:null}}ngOnInit(){this.obtenerListaARazonesAjuste(),this.ObtenerListaTipoAjuste()}showSuccess(){this.messageService.add({severity:"success",summary:"\xc9xito al guardar",detail:"Se guard\xf3 la raz\xf3n del ajuste satisfactoriamente"})}sujerencias(){this.servicio.SugerenciasMotivoMovimientos(this.buscador).subscribe({next:e=>{e.length>0?(this.listaMotivosMovimientos=[],this.listaMotivosMovimientos=e):this.obtenerListaARazonesAjuste()},error:e=>{this.obtenerListaARazonesAjuste(),console.log(e)}})}obtenerListaARazonesAjuste(){this.servicio.obtenerMotivosMovimientos().subscribe({next:e=>{this.listaMotivosMovimientos=[],this.listaMotivosMovimientos=e},error:e=>{console.log(e)}})}limpiar(){this.TipoMovimientoSeleccionado={tpmId:1,tpmDescripcion:"Positivo"},this.motivo={mtmId:0,mtmDescripcion:"",mtmIdTipoMovimiento:0,mtmIdTipoMovimientoNavigation:null}}showModalDialog(){this.encabezado="Agregar nueva raz\xf3n de ajuste",this.displayModal=!0}ObtenerListaTipoAjuste(){this.servicio.obtenerTipoMovimiento().subscribe({next:e=>{this.listaTipoMovimiento=[],this.listaTipoMovimiento=e},error:e=>{console.log(e)}})}Cancelar(){this.limpiar(),this.displayModal=!1}editarAjuste(e){this.limpiar(),this.motivo=e,this.encabezado="Editar raz\xf3n de ajuste",this.TipoMovimientoSeleccionado=this.motivo.mtmIdTipoMovimientoNavigation,this.displayModal=!0}GuardarMotivoMovimiento(){this.motivo.mtmIdTipoMovimientoNavigation=null,this.motivo.mtmIdTipoMovimiento=this.TipoMovimientoSeleccionado.tpmId,this.servicio.GuardarMotivoMovimiento(this.motivo).subscribe({next:e=>{this.showSuccess(),this.limpiar(),this.obtenerListaARazonesAjuste(),this.displayModal=!1},error:e=>{console.log(e)}})}}m.\u0275fac=function(e){return new(e||m)(o.Y36(T.C),o.Y36(p.ez))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-razon-ajustes"]],features:[o._Bn([p.ez])],decls:15,vars:20,consts:[[1,"card"],[3,"value","tableStyle","rows","paginator","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","breakpoints","draggable","resizable","visibleChange"],[1,"field"],["placeholder","Seleccione el tipo de Ajuste","optionLabel","tpmDescripcion",3,"options","ngModel","showClear","ngModelChange"],["for","descripcion"],["id","Descripcion","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"grid"],[1,"col-2"],["icon","pi pi-plus",1,"mx-2",3,"click"],[1,"col"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Buscar",3,"ngModel","ngModelChange","input"],["class","text-green-500",4,"ngIf"],["class","text-red-500",4,"ngIf"],[1,"text-green-500"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],[1,"text-red-500"],["label","Cancelar","styleClass","p-button-text",3,"click"],["label","Guardar","styleClass","p-button-text",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"p-table",1),o.YNc(2,J,7,1,"ng-template",2),o.YNc(3,P,9,0,"ng-template",3),o.YNc(4,q,2,2,"ng-template",4),o.qZA()(),o.TgZ(5,"p-dialog",5),o.NdJ("visibleChange",function(n){return t.displayModal=n}),o.TgZ(6,"div",6),o._uU(7," Tipo de ajuste: "),o.TgZ(8,"p-dropdown",7),o.NdJ("ngModelChange",function(n){return t.TipoMovimientoSeleccionado=n}),o.qZA()(),o.TgZ(9,"div",6)(10,"label",8),o._uU(11,"Razon del ajuste"),o.qZA(),o.TgZ(12,"input",9),o.NdJ("ngModelChange",function(n){return t.motivo.mtmDescripcion=n}),o.qZA()(),o.YNc(13,F,2,0,"ng-template",10),o.qZA(),o._UZ(14,"p-toast")),2&e&&(o.xp6(1),o.Q6J("value",t.listaMotivosMovimientos)("tableStyle",o.DdM(16,O))("rows",10)("paginator",!0)("rowsPerPageOptions",o.DdM(17,k)),o.xp6(4),o.Akn(o.DdM(18,B)),o.s9C("header",t.encabezado),o.Q6J("visible",t.displayModal)("breakpoints",o.DdM(19,E))("draggable",!1)("resizable",!1),o.xp6(3),o.Q6J("options",t.listaTipoMovimiento)("ngModel",t.TipoMovimientoSeleccionado)("showClear",!0),o.xp6(4),o.Q6J("ngModel",t.motivo.mtmDescripcion))},dependencies:[v.O5,p.jx,h.Hq,h.zx,R.V,A.Lt,C.o,r.Fj,r.JJ,r.On,w.iA,f.FN,b.H]});const Y=[{path:"",component:u,children:[{path:"",component:c},{path:"realizar-ajuste",component:c},{path:"razon-ajuste",component:m},{path:"**",redirectTo:"/"}]}];class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=o.oAB({type:d}),d.\u0275inj=o.cJS({imports:[_.Bz.forChild(Y),_.Bz]});var Q=s(4632);class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[v.ez,d,Q.R,r.u5]})}}]);