"use strict";(self.webpackChunkFrontEndPuraVidaStore=self.webpackChunkFrontEndPuraVidaStore||[]).push([[154],{6154:(E,P,r)=>{r.r(P),r.d(P,{ProductosModule:()=>h});var _=r(6895),u=r(8590),f=r(8505),p=r(805),o=r(8256),a=r(3441),g=r(4418),v=r(5593),M=r(4247),A=r(1493),x=r(7913),d=r(433),y=r(8396),D=r(2453);function U(e,i){1&e&&(o.TgZ(0,"tr")(1,"th"),o._uU(2,"Nombre"),o.qZA(),o.TgZ(3,"th"),o._uU(4,"Imagen"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Codigo"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"C\xf3digo proveedor"),o.qZA(),o.TgZ(9,"th"),o._uU(10,"Categoria"),o.qZA(),o.TgZ(11,"th"),o._uU(12,"Acciones"),o.qZA()())}function N(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._UZ(4,"img",20),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td")(12,"p-button",21),o.NdJ("click",function(){const c=o.CHM(t).$implicit,l=o.oxw();return o.KtG(l.seleccionar(c))}),o.qZA()()()}if(2&e){const t=i.$implicit,n=o.oxw();o.xp6(2),o.Oqu(t.prdNombre),o.xp6(2),o.Q6J("src",n.leerArchivo(t.pdrFoto),o.LSH)("alt",t.prdNombre),o.xp6(2),o.Oqu(t.prdCodigo),o.xp6(2),o.Oqu(t.prdCodigoProvedor),o.xp6(2),o.Oqu(null==t.prdIdTipoProductoNavigation?null:t.prdIdTipoProductoNavigation.tppDescripcion)}}function F(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"p-button",22),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.displayModal=!1)}),o.qZA()}}function I(e,i){if(1&e&&(o.TgZ(0,"div",16)(1,"div",17)(2,"div",8)(3,"h1"),o._uU(4),o.qZA()()()()),2&e){const t=o.oxw();o.xp6(4),o.Oqu(t.producto.prdNombre)}}function J(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",8),o._uU(1,"Estado"),o.qZA(),o.TgZ(2,"div",8),o._uU(3," Inactivo "),o.TgZ(4,"p-inputSwitch",23),o.NdJ("ngModelChange",function(s){o.CHM(t);const c=o.oxw();return o.KtG(c.producto.pdrVisible=s)})("onChange",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.activarProducto())}),o.qZA(),o._uU(5," Activo "),o.qZA()}if(2&e){const t=o.oxw();o.xp6(4),o.Q6J("ngModel",t.producto.pdrVisible)("disabled",t.esDeshabilitado)}}const w=function(){return{width:"70vw"}},q=function(){return{"min-width":"50rem"}},B=function(){return[5,7,10]},O=function(){return{width:"15rem","margin-bottom":"2em"}};class T{constructor(i,t){this.servicio=i,this.messageService=t,this.buscadorCodigoDeBarras="",this.buscadorPorDescripcion="",this.displayModal=!1,this.esAdministrador=u.o.esAministrador(),this.esDeshabilitado=!this.esAdministrador,this.enfoque=!0,this.tipoProducto={tppId:0,tppDescripcion:"",tppVisible:null},this.producto={prdId:0,prdNombre:"",prdPrecioVentaMayorista:0,prdPrecioVentaMinorista:0,prdCodigo:"",prdUnidadesMinimas:0,prdIdTipoProducto:0,prdCodigoProvedor:"",pdrVisible:!1,pdrFoto:null,pdrTieneExistencias:!1,prdIdTipoProductoNavigation:this.tipoProducto},this.foto=this.leerArchivo(this.producto.pdrFoto),this.listaProductos=[]}ngOnInit(){}showModalDialog(){this.obtenerLista(),this.displayModal=!0}obtenerLista(){this.servicio.ObtenerTodosLosProductosNoFiltrada().subscribe({next:i=>{this.listaProductos=[],this.listaProductos=i},error:i=>{console.log(i)}})}seleccionar(i){this.producto=i,this.foto=this.leerArchivo(this.producto.pdrFoto),this.buscadorCodigoDeBarras="",this.cambiarEstadoDeshabilitado(),this.displayModal=!1}buscarPorDescripcion(){this.servicio.BuscarPorPalabraNoFiltrada(this.buscadorPorDescripcion).subscribe({next:i=>{i.length>0?this.listaProductos=i:this.obtenerLista()},error:i=>{this.obtenerLista(),console.log(i)}})}obtenerPorCodigoDeBarras(){this.servicio.ObtenerProductoPorCodigo(this.buscadorCodigoDeBarras).subscribe({next:i=>{this.producto=i,this.foto=this.leerArchivo(this.producto.pdrFoto),this.buscadorCodigoDeBarras="",this.cambiarEstadoDeshabilitado()},error:i=>{this.showError(),console.log(i)}})}cambiarEstadoDeshabilitado(){this.esAdministrador&&(this.esDeshabilitado=this.producto.pdrTieneExistencias||!1)}limpiar(){this.tipoProducto={tppId:0,tppDescripcion:"",tppVisible:null},this.producto={prdId:0,prdNombre:"",prdPrecioVentaMayorista:0,prdPrecioVentaMinorista:0,prdCodigo:"",prdUnidadesMinimas:0,prdIdTipoProducto:0,prdCodigoProvedor:"",pdrVisible:!1,pdrFoto:null,pdrTieneExistencias:!1,prdIdTipoProductoNavigation:this.tipoProducto},this.foto=this.leerArchivo(this.producto.pdrFoto),this.buscadorCodigoDeBarras="",this.cambiarEstadoDeshabilitado()}leerArchivo(i){return null==i&&(i=""),f.Z.lectorImagen(i)}activarProducto(){this.producto.prdId>0&&this.servicio.GuardarProducto(this.producto,u.o.usuarioPrograma.usrId).subscribe({next:i=>{},error:i=>{console.log(i)}})}showError(){this.messageService.add({severity:"error",summary:"Error",detail:"No se encontr\xf3 resultados con el valor indicado"})}}T.\u0275fac=function(i){return new(i||T)(o.Y36(a.M),o.Y36(p.ez))},T.\u0275cmp=o.Xpm({type:T,selectors:[["app-consulta-producto"]],features:[o._Bn([p.ez])],decls:32,vars:23,consts:[[1,"my-2"],[1,"grid"],[1,"col-9"],["type","text","placeholder","Buscar por c\xf3digo","pAutoFocus","",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full",3,"ngModel","autofocus","ngModelChange","keyup.enter"],[1,"col"],["icon","pi pi-search",1,"mx-1",3,"onClick"],["icon","pi pi-external-link","label","Ver productos",3,"click"],["header","Lista de productos",3,"visible","modal","maximizable","visibleChange"],[1,"field"],["for","buscarDescripcion"],["id","buscarDescripcion","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full",3,"ngModel","ngModelChange","input"],[3,"value","tableStyle","rows","paginator","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["icon","pi pi-eraser","iconPos","right",1,"mx-1",3,"onClick"],[1,"flex","justify-content-center","flex-wrap","card-container","col"],[1,"flex","align-items-center","justify-content-center","col"],[3,"src"],["position","top-right"],["width","100",1,"shadow-4",3,"src","alt"],["label","Seleccionar","icon","pi pi-check",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],[3,"ngModel","disabled","ngModelChange","onChange"]],template:function(i,t){1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),o.NdJ("ngModelChange",function(s){return t.buscadorCodigoDeBarras=s})("keyup.enter",function(){return t.obtenerPorCodigoDeBarras()}),o.qZA()(),o.TgZ(4,"div",4)(5,"p-button",5),o.NdJ("onClick",function(){return t.obtenerPorCodigoDeBarras()}),o.qZA(),o.TgZ(6,"p-button",6),o.NdJ("click",function(){return t.showModalDialog()}),o.qZA(),o.TgZ(7,"p-dialog",7),o.NdJ("visibleChange",function(s){return t.displayModal=s}),o.TgZ(8,"div",8)(9,"label",9),o._uU(10,"Buscar por descripci\xf3n"),o.qZA(),o.TgZ(11,"input",10),o.NdJ("ngModelChange",function(s){return t.buscadorPorDescripcion=s})("input",function(){return t.buscarPorDescripcion()}),o.qZA()(),o.TgZ(12,"div",8)(13,"p-table",11),o.YNc(14,U,13,0,"ng-template",12),o.YNc(15,N,13,6,"ng-template",13),o.qZA()(),o.YNc(16,F,1,0,"ng-template",14),o.qZA(),o.TgZ(17,"p-button",15),o.NdJ("onClick",function(){return t.limpiar()}),o.qZA()()(),o.TgZ(18,"p-card"),o.YNc(19,I,5,1,"ng-template",12),o.TgZ(20,"div",16)(21,"div",17)(22,"div",8),o._UZ(23,"img",18),o.qZA()()(),o.TgZ(24,"div",8),o._uU(25),o.qZA(),o.TgZ(26,"div",8),o._uU(27),o.qZA(),o.TgZ(28,"div",8),o._uU(29),o.qZA(),o.YNc(30,J,6,2,"ng-template",14),o.qZA()(),o._UZ(31,"p-toast",19)),2&i&&(o.xp6(3),o.Q6J("ngModel",t.buscadorCodigoDeBarras)("autofocus",t.enfoque),o.xp6(4),o.Akn(o.DdM(19,w)),o.Q6J("visible",t.displayModal)("modal",!0)("maximizable",!0),o.xp6(4),o.Q6J("ngModel",t.buscadorPorDescripcion),o.xp6(2),o.Q6J("value",t.listaProductos)("tableStyle",o.DdM(20,q))("rows",5)("paginator",!0)("rowsPerPageOptions",o.DdM(21,B)),o.xp6(10),o.Akn(o.DdM(22,O)),o.Q6J("src",t.foto,o.LSH),o.xp6(2),o.hij("C\xf3digo: ",t.producto.prdCodigo,""),o.xp6(2),o.hij(" C\xf3digo del provedor: ",t.producto.prdCodigoProvedor," "),o.xp6(2),o.hij(" Categoria: ",null==t.producto.prdIdTipoProductoNavigation?null:t.producto.prdIdTipoProductoNavigation.tppDescripcion," "))},dependencies:[p.jx,g.P,v.zx,M.Z,A.V,x.Ql,d.Fj,d.JJ,d.On,y.iA,D.FN]});var Z=r(8184),L=r(7919);class b{constructor(){this.items=[]}ngOnInit(){this.items=[{label:"Productos",icon:"pi pi-pw pi-file",routerLink:"productos",items:[{label:"Agregar",icon:"pi pi-pw pi-file",routerLink:"productos/agregar-editar/0",visible:u.o.esAministrador()},{label:"Lista de productos",icon:"pi pi-pw pi-file",routerLink:"productos/lista-productos"}]},{label:"Tipo de producto",icon:"pi pi-pw pi-file",routerLink:"tipo-producto"},{label:"Consultar producta",icon:"pi pi-pw pi-file",routerLink:"consulta-producto"}]}}b.\u0275fac=function(i){return new(i||b)},b.\u0275cmp=o.Xpm({type:b,selectors:[["app-productos"]],decls:5,vars:1,consts:[[1,"formgrid","grid","my-2"],[1,"field","col-2"],[3,"model"],[1,"field","col"]],template:function(i,t){1&i&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"p-panelMenu",2),o.qZA(),o.TgZ(3,"div",3),o._UZ(4,"router-outlet"),o.qZA()()),2&i&&(o.xp6(2),o.Q6J("model",t.items))},dependencies:[Z.lC,L.f3]});var V=r(5861),S=r(9349),k=r(1740),z=r(1795);function Q(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"p-button",10),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.guardar())}),o.qZA(),o.TgZ(1,"p-button",11),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.displayModal=!1)}),o.qZA()}}function j(e,i){1&e&&(o.TgZ(0,"tr")(1,"th"),o._uU(2,"#"),o.qZA(),o.TgZ(3,"th"),o._uU(4,"Descripci\xf3n"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Acciones"),o.qZA()())}function G(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td")(6,"button",12),o.NdJ("click",function(){const c=o.CHM(t).$implicit,l=o.oxw();return o.KtG(l.showModalDialog(c.tppId))}),o.qZA(),o.TgZ(7,"p-inputSwitch",13),o.NdJ("ngModelChange",function(s){const l=o.CHM(t).$implicit;return o.KtG(l.tppVisible=s)})("onChange",function(){const c=o.CHM(t).$implicit,l=o.oxw();return o.KtG(l.cambio(c))}),o.qZA(),o.TgZ(8,"label",14),o._uU(9,"Visible"),o.qZA()()()}if(2&e){const t=i.$implicit,n=o.oxw();o.xp6(2),o.Oqu(t.tppId),o.xp6(2),o.Oqu(t.tppDescripcion),o.xp6(2),o.Q6J("disabled",!n.esAdministrador),o.xp6(1),o.Q6J("ngModel",t.tppVisible)("disabled",!n.esAdministrador)}}const Y=function(){return{width:"50vw"}},H=function(){return[10,20,30]};class C{constructor(i,t,n){this.primengConfig=i,this.servicio=t,this.messageService=n,this.displayModal=!1,this.esAdministrador=u.o.esAministrador(),this.listaTipoProductos=[],this.buscador="",this.TipoProductoEditar={tppId:0,tppDescripcion:"",tppVisible:!1},this.Encabezado="",this.position=""}ngOnInit(){this.primengConfig.ripple=!0,this.inicio()}showModalDialog(i){i>0?(this.Encabezado="Editar",this.TipoProductoEditar.tppId=i,this.listaTipoProductos.forEach(t=>{t.tppId===this.TipoProductoEditar.tppId&&(this.TipoProductoEditar.tppVisible=t.tppVisible)})):(this.Encabezado="Agregar",this.reiniciarEditable()),this.displayModal=!0}reiniciarEditable(){this.TipoProductoEditar={tppId:0,tppDescripcion:"",tppVisible:!1}}guardar(){var i=this;return(0,V.Z)(function*(){0===i.TipoProductoEditar.tppId&&(i.TipoProductoEditar.tppVisible=!0),yield i.servicio.guardarTipoUsuario(i.TipoProductoEditar).subscribe(t=>{i.TipoProductoEditar=t,i.inicio()},t=>{console.log(t)}),i.Exito(i.TipoProductoEditar.tppDescripcion),i.displayModal=!1})()}inicio(){this.servicio.listaTipoProducto().subscribe(i=>{this.listaTipoProductos=[],this.listaTipoProductos=i},i=>console.log(i))}Exito(i){this.messageService.add({severity:"success",summary:"Se guard\xf3 con \xe9xito el tipo de producto",detail:i})}cambio(i){this.servicio.guardarTipoUsuario(i).subscribe(t=>{},t=>{console.log(t)})}sujerencias(i){console.log(i),this.servicio.sugerencias(i).subscribe(t=>{this.listaTipoProductos=[],this.listaTipoProductos=t,this.reiniciarEditable()},t=>{this.inicio(),console.log(t)})}}C.\u0275fac=function(i){return new(i||C)(o.Y36(p.b4),o.Y36(S.z),o.Y36(p.ez))},C.\u0275cmp=o.Xpm({type:C,selectors:[["app-tipo-producto"]],features:[o._Bn([p.ez])],decls:13,vars:18,consts:[[3,"header","visible","modal","baseZIndex","draggable","resizable","visibleChange"],["type","text","pInputText","","placeholder","Descripci\xf3n",3,"ngModel","ngModelChange"],["pTemplate","footer"],["pButton","","type","button","icon","pi pi-plus",1,"p-button-rounded","p-button-info","mx-2",3,"disabled","click"],["type","text","pInputText","","placeholder","Buscar","pAutoFocus","",3,"ngModel","autofocus","ngModelChange","change","input"],[1,"my-2"],["responsiveLayout","scroll",3,"value","paginator","rows","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["position","top-right"],["icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"],["icon","pi pi-times","label","Cancelar",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning","mx-2",3,"disabled","click"],[3,"ngModel","disabled","ngModelChange","onChange"],[1,"mx-1"]],template:function(i,t){1&i&&(o.TgZ(0,"p-dialog",0),o.NdJ("visibleChange",function(s){return t.displayModal=s}),o.TgZ(1,"label"),o._uU(2,"Descripci\xf3n: "),o.qZA(),o.TgZ(3,"input",1),o.NdJ("ngModelChange",function(s){return t.TipoProductoEditar.tppDescripcion=s}),o.qZA(),o.YNc(4,Q,2,0,"ng-template",2),o.qZA(),o.TgZ(5,"p-card")(6,"button",3),o.NdJ("click",function(){return t.showModalDialog(0)}),o.qZA(),o.TgZ(7,"input",4),o.NdJ("ngModelChange",function(s){return t.buscador=s})("change",function(){return t.sujerencias(t.buscador)})("input",function(){return t.sujerencias(t.buscador)}),o.qZA()(),o.TgZ(8,"div",5)(9,"p-table",6),o.YNc(10,j,7,0,"ng-template",7),o.YNc(11,G,10,5,"ng-template",8),o.qZA()(),o._UZ(12,"p-toast",9)),2&i&&(o.Akn(o.DdM(16,Y)),o.s9C("header",t.Encabezado),o.Q6J("visible",t.displayModal)("modal",!0)("baseZIndex",1e4)("draggable",!1)("resizable",!1),o.xp6(3),o.Q6J("ngModel",t.TipoProductoEditar.tppDescripcion),o.xp6(3),o.Q6J("disabled",!t.esAdministrador),o.xp6(1),o.Q6J("ngModel",t.buscador)("autofocus",!0),o.xp6(2),o.Q6J("value",t.listaTipoProductos)("paginator",!0)("rows",10)("rowsPerPageOptions",o.DdM(17,H)))},dependencies:[p.jx,g.P,v.Hq,v.zx,M.Z,A.V,k.o,x.Ql,d.Fj,d.JJ,d.On,y.iA,D.FN,z.H]});const K=[{path:"",component:b,children:[{path:"tipo-producto",component:C},{path:"consulta-producto",component:T},{path:"productos",loadChildren:()=>r.e(252).then(r.bind(r,7252)).then(e=>e.MantenimientoProductosModule)},{path:"**",redirectTo:"productos"}]}];class m{}m.\u0275fac=function(i){return new(i||m)},m.\u0275mod=o.oAB({type:m}),m.\u0275inj=o.cJS({imports:[Z.Bz.forChild(K),Z.Bz]});var $=r(4632);class h{}h.\u0275fac=function(i){return new(i||h)},h.\u0275mod=o.oAB({type:h}),h.\u0275inj=o.cJS({imports:[_.ez,m,$.R,d.u5,d.UX]})},9349:(E,P,r)=>{r.d(P,{z:()=>p});var _=r(529),u=r(2340),f=r(8256);class p{constructor(a){this.http=a,this.baseUrl=u.N.urlBase}listaTipoProducto(){return this.http.get(`${this.baseUrl}TipoProduco/ListaTipoProducto`)}listaTipoProductoFiltrado(){return this.http.get(`${this.baseUrl}TipoProduco/ListaTipoProductoFiltrado`)}guardarTipoUsuario(a){return this.http.post(`${this.baseUrl}TipoProduco/GuardarTipoProducto`,a)}obetenerTipoProductoPorId(a){const g=(new _.LE).set("id",a);return this.http.get(`${this.baseUrl}TipoProduco/ObtenerTipoProductoPorId`,{params:g})}sugerencias(a){const g=(new _.LE).set("dato",a);return this.http.get(`${this.baseUrl}TipoProduco/BuscarTipoProductoPorDescripcion`,{params:g})}}p.\u0275fac=function(a){return new(a||p)(f.LFG(_.eN))},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}}]);